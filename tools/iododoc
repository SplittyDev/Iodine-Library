#! /usr/bin/iodine

use sys
use fsutils
use iododoc

func main (args) {
    if (len (args) == 0) {
        print ("Usage iododoc <module>")
        sys.exit (-1)
    }
    
    module = args [0]
    
    try {
        code = loadmodule (module)
        items = iododoc.compiledoc (code)
        buffer = StringBuffer ()
        iododoc.HtmlFormatter ().format (items, buffer)
        with (output = open (module + ".html", "w")) {
            output.write (Str (buffer))
        }
    } except (ModuleLoadException) {
        print ("Could not find module!")
    }
}
